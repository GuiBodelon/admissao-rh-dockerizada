import{Q as I}from"./QInnerLoading.9979afb4.js";import{Q as b}from"./use-checkbox.d03c73c8.js";import{j as V,J as z,r as w,aV as F,w as L,c as N,N as A,am as R,K as $,_ as P,k,L as Q,d as o,m as a,P as v,a9 as t,M as j,F as M,ac as O,aa as l,ab as E,l as G}from"./index.2bf94b66.js";import{Q as H,a as J,b as T,c as s,d as K}from"./QTable.2ebceaad.js";import{Q as W}from"./QInput.d70042f7.js";import{Q as X}from"./QBadge.4e017ae4.js";import{apiBackendLaravel as y}from"./axios.e0ae4c8c.js";import{u as Y}from"./app-store.dde54c31.js";import"./use-dark.bd89d3f8.js";import"./QItemLabel.8b0fe373.js";import"./use-form.59da048f.js";import"./scroll.ecf7d4c2.js";import"./QSelect.2a34a1c8.js";import"./QCheckbox.b727e7d4.js";var Z=V({name:"FichaAdmissao",setup(){const r=z(),c=Y(),m=r.user.token,i=R(),h=$(),f=w([{id:String}]),e=[{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"name",align:"left",label:"Nome",field:"name",sortable:!0},{name:"email",align:"left",label:"E-mail Corporativo",field:"email",sortable:!0},{name:"vinculo",align:"left",label:"V\xEDnculo",field:"vinculo",sortable:!1},{name:"data_contratacao",align:"left",label:"Data de Contrata\xE7\xE3o",field:"data_contratacao",sortable:!1},{name:"cargo",align:"left",label:"Cargo",field:"cargo",sortable:!1},{name:"equipe",align:"left",label:"Equipe",field:"equipe",sortable:!1},{name:"unidade",align:"left",label:"Unidade",field:"unidade",sortable:!1},{name:"status_formulario_admissao",align:"center",label:"Status do Formul\xE1rio",field:"status_formulario_admissao",sortable:!0},{name:"created_at",align:"center",label:"Criado Em",field:"created_at",sortable:!0},{name:"updated_at",align:"center",label:"Atualizado Em",field:"updated_at",sortable:!0},{name:"acoes",align:"center",label:"A\xE7\xF5es",field:"acoes",sortable:!1}],n=w(!1);function p(){n.value=!0;let u="";i.params.id?u="users/"+i.params.id:u="users",y.get(u,{headers:{Authorization:"Bearer "+m}}).then(d=>{i.params.id?f.value=[d.data]:f.value=d.data.filter(_=>_.vinculo!==null&&_.vinculo!=="Estagi\xE1rio"),n.value=!1}).catch(d=>{A.create({progress:!0,color:"yellow-8",textColor:"dark",position:"bottom",message:d,icon:"warning"})})}function U(){i.params.id&&(i.params.id="",h.push({name:"Ficha de Admiss\xE3o - RH"})),p()}F(()=>{p()}),L(()=>i.params.id,()=>{p()});function B(u,d){const _=A.create({progress:!0,group:!1,spinner:!0,timeout:0,message:"O Contrato esta sendo gerado, por favor aguarde..."}),C={id:u,vinculo:d};y.get("gerar-contrato/filename",{params:C,headers:{Authorization:"Bearer "+m}}).then(x=>{const D=x.data.filename;y.get("gerar-contrato/",{params:C,responseType:"blob",headers:{Authorization:"Bearer "+m}}).then(q=>{const S=window.URL.createObjectURL(new Blob([q.data])),g=document.createElement("a");g.href=S,g.setAttribute("download",D),document.body.appendChild(g),g.click(),_({type:"positive",icon:"done",spinner:!1,message:"Contrato gerado com sucesso!",timeout:2500})})})}return{isDarkActive:N(()=>c.isDarkActive),getUsers:p,rows:f,columns:e,loadingUsersTable:n,filterUsersTable:w(""),gerarContrato:B,removeIdParam:U}}});const ee={class:"q-pt-lg full-width"};function ae(r,c,m,i,h,f){return k(),Q("div",ee,[o(H,{title:"Colaboradores",rows:r.rows,columns:r.columns,"row-key":"name",filter:r.filterUsersTable,loading:r.loadingUsersTable},{loading:a(()=>[o(I,{showing:"",color:"primary"})]),top:a(()=>[o(v,{color:"primary",icon:"person_add",class:"q-mr-md",to:"/configuracoes/cadastro-de-usuarios"},{default:a(()=>[o(b,null,{default:a(()=>[t("Adicionar novo Colaborador")]),_:1})]),_:1}),o(v,{icon:"refresh",outline:r.isDarkActive,color:r.isDarkActive?"warning":"dark",onClick:r.removeIdParam},{default:a(()=>[o(b,null,{default:a(()=>[t("Atualizar Tabela")]),_:1})]),_:1},8,["outline","color","onClick"]),o(J),o(W,{dense:"",debounce:"300",modelValue:r.filterUsersTable,"onUpdate:modelValue":c[0]||(c[0]=e=>r.filterUsersTable=e),placeholder:"Procurar"},{append:a(()=>[o(j,{name:"search"})]),_:1},8,["modelValue"])]),header:a(e=>[o(T,{props:e},{default:a(()=>[(k(!0),Q(M,null,O(e.cols,n=>(k(),G(K,{key:n.name,props:e,class:E(r.isDarkActive?"text-white":"")},{default:a(()=>[t(l(n.label),1)]),_:2},1032,["props","class"]))),128))]),_:2},1032,["props"])]),body:a(e=>[o(T,{props:e},{default:a(()=>[o(s,{key:"id",props:e},{default:a(()=>[t(l(e.row.id),1)]),_:2},1032,["props"]),o(s,{key:"name",props:e},{default:a(()=>[t(l(e.row.name),1)]),_:2},1032,["props"]),o(s,{key:"email",props:e},{default:a(()=>[t(l(e.row.email),1)]),_:2},1032,["props"]),o(s,{key:"vinculo",props:e},{default:a(()=>[t(l(e.row.vinculo),1)]),_:2},1032,["props"]),o(s,{key:"data_contratacao",props:e},{default:a(()=>[t(l(e.row.data_contratacao),1)]),_:2},1032,["props"]),o(s,{key:"cargo",props:e},{default:a(()=>[t(l(e.row.cargo),1)]),_:2},1032,["props"]),o(s,{key:"equipe",props:e},{default:a(()=>[t(l(e.row.equipe),1)]),_:2},1032,["props"]),o(s,{key:"unidade",props:e},{default:a(()=>[t(l(e.row.unidade),1)]),_:2},1032,["props"]),o(s,{key:"status_formulario_admissao",props:e},{default:a(()=>[o(X,{class:E(e.row.status_formulario_admissao=="0"?"bg-yellow text-white":"bg-primary text-white")},{default:a(()=>[t(l(e.row.status_formulario_admissao=="0"?"N\xE3o enviado":"Enviado"),1)]),_:2},1032,["class"])]),_:2},1032,["props"]),o(s,{key:"created_at",props:e},{default:a(()=>[t(l(e.row.created_at),1)]),_:2},1032,["props"]),o(s,{key:"updated_at",props:e},{default:a(()=>[t(l(e.row.updated_at),1)]),_:2},1032,["props"]),o(s,{key:"acoes",class:"row justify-center items-center",style:{"min-width":"200px"}},{default:a(()=>[o(v,{disabled:e.row.status_formulario_admissao=="0",icon:"cloud_download",color:"primary",dense:"",onClick:n=>r.gerarContrato(e.row.id,e.row.vinculo)},{default:a(()=>[o(b,null,{default:a(()=>[t(" Clique para Gerar o Contrato ")]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","loading"])])}var ge=P(Z,[["render",ae],["__scopeId","data-v-79bc9163"]]);export{ge as default};
